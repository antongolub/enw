define("models/populationModel",["models/defaultModel"],function(e){return e.extend({path:"api/stats/population"})}),define("text!templates/populationTpl.hbs",[],function(){return'<div id="{{id}}" class="enw__widget">\n	<h3 class="enw__title"></h3>\n	<div class="enw__menu"></div>\n    <div class="enw__msgbox"></div>\n	<div class="enw__content">\n		<div class="enw__chart avgChart"></div>\n		<div class="enw__chart yearChart"></div>\n	</div>\n</div>'}),define("views/population/populationAvgChartView",["views/chartView","underscore","utils"],function(e,t,i){return e.extend({type:"spline",options:{yAxis:{title:{text:"population".toLocaleString()},min:0},plotOptions:{series:{point:{events:{click:function(){return this.series.chart.options.getWidget().switchMode({year:this.category}),this.category}}}}},series:[{name:"male".toLocaleString()},{name:"female".toLocaleString()},{name:"total".toLocaleString()}],tooltip:{formatter:function(){return"<b>"+this.series.name+"</b><br/>"+this.x+": "+this.y.toPrecision(3)}}},update:function(e){if(this.chart&&e){var a,n,o=1/0,r=-1/0,l={male:[],female:[],total:[]};return t.each(e,function(e){e.year>r&&(r=e.year),e.year<o&&(o=e.year)}),t.each(e,function(e){n=e.year-o,e=e.population,l.male[n]=i.sum(e.male),l.female[n]=i.sum(e.female),l.total[n]=e.overall}),a=t.range(o,r+1),t.each(l,function(e){e=i.replace(void 0,null)}),this.updateSpline(l.male,l.female,l.total),this.chart.xAxis[0].setCategories(a,!1),this.redraw(),l}}})}),define("views/population/populationYearChartView",["views/chartView","underscore","utils"],function(e,t,i){return e.extend({type:"column",options:{yAxis:{title:{text:"population".toLocaleString()}},series:[{name:"male".toLocaleString()},{name:"female".toLocaleString()}],tooltip:{formatter:function(){return"<b>"+this.series.name+"</b><br/>"+this.x+": "+this.y.toFixed(0)}}},update:function(e){if(this.chart&&e){var a=t.range(1,12),n={male:[].concat(e.male),female:[].concat(e.female)};return t.each(e,function(e){e=i.replace(void 0,null)}),this.updateCol(n.male,n.female),this.chart.xAxis[0].setCategories(a,!1),this.redraw(),e}}})}),define("views/population/populationView",["framework","views/defaultView","text!templates/populationTpl.hbs","models/populationModel","underscore","utils","views/population/populationAvgChartView","views/population/populationYearChartView"],function(e,t,i,a,n,o,r,l){var s=".enw__menu";return t.extend({template:i,name:"populationTpl",title:"populationTitle",ModelConstructor:a,mode:{year:"avg"},renderData:function(){var e=this.model.get("collection"),t=this.getRelatedView();return this.renderMenu&&(this.renderMenu(["avg"].concat(n.uniq(n.pluck(e,"year"))),s),this.renderMenu=void 0),this.showMsg(),t&&(t.render(e||this.model.get("population")),this.switchRelatedView(t.$el)),this.model.attributes},afterRender:function(){var t=".enw__menu__link";this.$el.on("click",t,e.proxy(this.onMenuClick,this))},getRelatedView:function(){var e,t,i,a=this.mode;return"avg"===a.year?(t="avgChart",e=".avgChart",i=r):(t="yearChart",e=".yearChart",i=l),this.initRelatedView(t,i,e)},onMenuClick:function(t){var i=e(t.target),a=i.data("href");return 2===this.status&&this.switchMode(a),a},switchMode:function(e){var t=this.setMode(e),i=this.model,a=i.host+"/"+i.path;return t&&(this.selectMenuItem(t.year,this.$el.find(s)),"avg"!==t.year&&(a+="/"+t.year),this.fetch(a)),t}})}),define("modules/populationModule",["models/populationModel","views/population/populationView","views/population/populationAvgChartView","views/population/populationYearChartView"],function(){});