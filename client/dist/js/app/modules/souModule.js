define("models/souModel",["models/defaultModel"],function(e){return e.extend({path:"api/stats/sou"})}),define("views/sou/souChartView",["views/chartView","underscore","utils"],function(e,t,i){return e.extend({update:function(e,s){if(this.chart&&e){var n,r,o,a,u=1/0,d=[],h=[],l=this.chart.series,c=l[0],w=l[1];return t.each(e,function(e){r=e.indicator.quality,e.year<u&&(u=e.year),r.raw&&(h[e.year]=r.raw[0].average),d[e.year]=r.average}),d=i.replace(d.slice(u,d.length),void 0,null),n=t.range(u,u+d.length),this.chart.xAxis[0].setCategories(n),o={data:d,name:"sou".toLocaleString()},c?c.update(o,!1):this.chart.addSeries(o,!1),h.length?(h=i.replace(h.slice(u,h.length),void 0,null),a={data:h,name:"sou".toLocaleString()+"-"+String(s).toLocaleString().toLocaleLowerCase()},w?w.update(a,!1):this.chart.addSeries(a,!1)):w&&(w.options.showInLegend=!1,w.legendItem=null,this.chart.legend.destroyItem(w),w.remove(!1)),this.chart.legend.render(),this.redraw(),l}}})}),define("views/sou/souView",["views/defaultView","views/sou/souChartView","text!templates/defaultTpl.hbs","models/souModel","framework","utils"],function(e,t,i,s,n){return e.extend({template:i,name:"souTpl",title:"souTitle",ModelConstructor:s,renderData:function(){return this.renderMenu&&(this.renderMenu(["avg"].concat(this.model.get("unique")||[])),this.renderMenu=void 0),this.chartView&&this.chartView.render(this.model.get("collection"),this.model.get("subtype")),this.switchModeDelayed(),this.showMsg(),this.model.attributes},afterRender:function(){var e=".enw__menu__link",i=".enw__chart";this.$el.on("click",e,n.proxy(this.onMenuClick,this)),this.chartView=new t({el:this.$el.find(i).get(0)})},onMenuClick:function(e){var t=n(e.target),i=t.data("href");return 2===this.status?(this.switchMode(i),i):void 0},switchMode:function(e){var t=e&&"avg"!==e?"/"+e:"",i=this.model,s=i.host+"/"+i.path+t,n=".enw__menu";return this.selectMenuItem(e,this.$el.find(n)),this.fetch(s),e}})}),define("modules/souModule",["models/souModel","views/sou/souView","views/sou/souChartView"],function(){});