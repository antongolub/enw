define(["views/defaultView","views/sou/souChartView","text!templates/defaultTpl.hbs","models/souModel","framework","utils"],function(e,t,i,n,s){return e.extend({template:i,name:"souTpl",title:"souTitle",ModelConstructor:n,renderData:function(){return this.renderMenu&&(this.renderMenu(["avg"].concat(this.model.get("unique")||[])),this.renderMenu=void 0),this.chartView&&this.chartView.render(this.model.get("collection"),this.model.get("subtype")),this.switchModeDelayed(),this.showMsg(),this.model.attributes},afterRender:function(){var e=".enw__menu__link",i=".enw__chart";this.$el.on("click",e,s.proxy(this.onMenuClick,this)),this.chartView=new t({el:this.$el.find(i).get(0)})},onMenuClick:function(e){var t=s(e.target),i=t.data("href");return 2===this.status?(this.switchMode(i),i):void 0},switchMode:function(e){var t=e&&"avg"!==e?"/"+e:"",i=this.model,n=i.host+"/"+i.path+t,s=".enw__menu";return this.selectMenuItem(e,this.$el.find(s)),this.fetch(n),e}})});