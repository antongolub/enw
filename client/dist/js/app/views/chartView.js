define(["backbone","framework","highcharts","underscore"],function(t,e,i,r){var n="#000",o="#FFF",s="#FFF",a="#777",h="#EEE",l=".enw__widget";return t.View.extend({type:"spline",redraw:function(t){if(this.chart){var e=this;setTimeout(function(){e.chart.redraw()},parseInt(t,10)||50)}},initialize:function(){this.self=this},getWidget:function(){return this.widget},create:function(t,r,n){return!this.chart&&(t=e(t||this.$el))?(n=e.extend(!0,{getWidget:e.proxy(this.getWidget,this),chart:{renderTo:t.get(0),width:t.closest(l).width()}},this.chartOptions.defaults,this.chartOptions[r||this.type],this.options,n),this.chart=new i.Chart(n),this.chart):null},flush:function(){return this.chart=null,null},render:function(){return this.create(),this.update.apply(this,arguments),this},update:function(){return!0},updateSeries:function(t,e){var i,r=this.chart.series[e||0];if(r){if(r.data&&r.data.length)for(i=0;i<t.length;i+=1)r.data[i].update(t[i],!1);else r.update({data:t});return r}return null},updateCol:function(){return r.map(arguments,e.proxy(this.updateSeries,this))},updatePie:function(){return r.map(arguments,e.proxy(this.updateSeries,this))},updateSpline:function(){var t=this,e=arguments.length,i=e,n=this.chart.series.length;if(n>e)for(i=n;i>e;)this.chart.series[i-1].remove(!1),i-=1;else for(;i>n;)i-=1,this.chart.addSeries({},!1);return r.map(arguments,function(e,i){var r=t.chart.series[i];return r.update(e.data?e:{data:e},!1),r})},chartOptions:{defaults:{chart:{backgroundColor:o},credits:{enabled:!1},legend:{borderColor:s,itemStyle:{fontWeight:"normal"}},title:{text:"",style:{color:n,fontSize:"normal"}}},column:{colors:["#0d233a","#d4d8e7"],chart:{type:"column",height:300},credits:{enabled:!1},legend:{borderColor:"#FFF"},title:{text:"",style:{color:"#000"}},yAxis:{title:{text:"Показатель, %",style:{color:"#777",fontWeight:"normal"}},gridLineColor:"#EEE"},xAxis:{title:{text:"Параллель",style:{color:"#777",fontWeight:"normal"}}},plotOptions:{column:{pointPadding:0,borderWidth:0,animation:!0}},tooltip:{enabled:!0,formatter:function(){return"<b>"+this.series.chart.options.series[this.series._i].name+("-"+this.x).toLowerCase()+"</b><br/>"+this.y.toPrecision(3)+"%"}}},spline:{chart:{type:"spline"},xAxis:{type:"linear",categories:[]},yAxis:{title:{text:"%",style:{color:a,fontWeight:"normal"}},gridLineColor:h},tooltip:{formatter:function(){return"<b>"+this.series.name+"</b><br/>"+this.x+": "+this.y.toPrecision(3)}},plotOptions:{spline:{dataLabels:{enabled:!1},enableMouseTracking:!0},series:{cursor:"pointer",marker:{lineWidth:1}}}},pie:{chart:{type:"pie",height:280},yAxis:{title:{text:"Проценты",style:{color:"#777",fontWeight:"normal"}}},plotOptions:{pie:{shadow:!1,center:["50%","50%"]}},tooltip:{formatter:function(){return"<b>"+this.point.name+"</b><br/>"+this.y.toPrecision(3)+"%"}}}}})});